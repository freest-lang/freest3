\section{Context-free session types}
\label{sec:contextfreesession}

The types we consider build upon a denumerable set of \emph{type
  variables} denoted by $X,Y,Z$, and a set \emph{type labels} denoted
by $\ell$. We assume given a set of base types $B$ that include the
$\unitk$ type. Further base types could include the integer and
boolean types, functions, and pairs. The syntax of types is derived
from the grammar below.
%
\begin{gather*}
  S,T \grmeq \skipk \grmor \sharp B \grmor 
  \star\{\ell_i\colon S_i\}_{i\in I} \grmor S;T \grmor \mu X.S \grmor X
  \\
  \sharp \grmeq {}! \grmor {}? 
  \qquad \qquad
  \star  \grmeq \oplus \grmor {}\&
  \qquad \qquad
  a \grmeq \sharp B \grmor \star l %\grmor \alpha
\end{gather*}

We assume that all occurrences of variables in a type are introduced
by some $\mu$-binder (no free variables in types).
%
We further assume that types are renamed so that all variables
introduced by~$\mu$ are distinct.
%
Finally, we require types to be contractive (no subterms of the form
$\mu X_1.\mu X_2 \dots \mu
X_n. X_1$)~\cite{DBLP:journals/tcs/Courcelle83,thiemann2016context}.
%
For simplicity we removed polymorphic type variables (not bound by
$\mu$) from the grammar; they can be treated as $\sharp B$.

The labelled transition system (LTS) for context-free session types is
given by the set of types as \emph{states}, the set of \emph{actions}
ranged over by $a$, and the \emph{transition relation} $\LTSderives$
defined by the rules below, taken from Thiemann and
Vasconcelos~\cite{thiemann2016context}.  The transition relation makes
use of an auxiliary judgment $\DONE{S}$ that characterizes terminated
states: session types that exhibit no further
action~\cite{DBLP:journals/jacm/AcetoH92} .
%
\begin{gather*}
  \DONE{\skipk}
  \quad
  \frac{\DONE{S} \quad \DONE{T}}{\DONE{S; T}}
  \quad
  \frac{\DONE{\subs{\mu X.S}{X} S}}{\DONE{\mu X.S}}
  \qquad \qquad \qquad
  % \alpha \LTSderives[\alpha] \skipk
  \sharp B \LTSderives[\sharp B] \skipk
  \quad
  \star\{l_i\colon S_i\} \LTSderives[\star l_j] S_j
  \\
  \frac{S \LTSderives S'}{S; T \LTSderives S';T}
  \quad
  \frac{\DONE{S} \quad T \LTSderives T'}{S; T \LTSderives T'}
  \quad
  \frac{\subs{\mu X.S}{X}S \LTSderives T}{\mu X.S \LTSderives T}
\end{gather*}

\emph{Type bisimulation}, $\TypeEquiv$, is defined in the usual way from the
labelled transition system~\cite{sangiorgi2014introduction}.
\
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
