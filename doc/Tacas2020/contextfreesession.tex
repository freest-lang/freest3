\section{Context-free session types}
\label{sec:contextfreesession}

This section briefly introduces context-free session types, based on
Thiemann and Vasconcelos~\cite{thiemann2016context}.
%
The types we consider build upon a denumerable set of \emph{variables}
denoted by $X,Y,Z$ and a set \emph{choice labels} denoted by
$\ell$. We assume given a set of base types denoted by~$B$.
% Further base types could include integer and boolean types, or any
% other type for which equality is decidable.
The syntax of types is given by the grammar below.
%
\begin{gather*}
  S,T \grmeq \skipk \grmor \sharp B \grmor 
  \star\{\ell_i\colon S_i\}_{i\in I} \grmor S;T \grmor \mu X.T \grmor X
  \\
  \sharp \grmeq {}! \grmor {}? 
  \qquad \qquad
  \star  \grmeq \oplus \grmor {}\&
  \qquad \qquad
  a \grmeq \sharp B \grmor \star l %\grmor \alpha
\end{gather*}

In type $\mu X.T$, variable $X$ is bound in the subterm~$T$. The sets
of bound and free variables in a given type are defined
accordingly. Notation $\subs{T}{X}S$ denotes the resulting of
substituting the (free) occurrences of $X$ by $T$ in $S$.

Judgement $\DONE S$ characterizes \emph{terminated} types:
context-free session types that exhibit no further
action~\cite{DBLP:journals/jacm/AcetoH92}.

\noindent The terminated predicate\hfill\fbox{$\DONE T$} 
%
\begin{gather*}
  \DONE{\skipk}
  \qquad
  \frac{\DONE{S} \quad \DONE{T}}{\DONE{S; T}}
  \qquad
  \frac{\DONE S}{\DONE{\mu X.S}}
\end{gather*}

We are not interested in all types generated by the above grammar.
%
If $\Delta$ is a list of pairwise distinct variables, then judgement
$\isType T$ characterises the types of interest: the
\emph{well-formed} types.

\noindent The type formation system \hfill\fbox{$\isType T$}
%
\begin{gather*}
  \frac{} 
  {
    \isType \skipk
  }
  \qquad
  \frac{}
  {
    \isType {\sharp B}
  }
  \qquad
  \frac{
    X \in \Delta
  }{
    \isType{X}
  }
  \\
  \frac{
    \isType{S}
    \quad
    \isType{T}
  }{
    \isType{S;T}
  }
  \qquad
  \frac{
    \isType{T_i}
  }{
    \isType{\star 
      \{ l_i \colon T_i\}}
  }
  \qquad
  \frac{
    % \isContr T
    \neg\DONE T
    \quad 
    \isType [\Delta, X] T
  }{
    \isType {\mu X. T}
  }
\end{gather*}
%
Type formation serves two main purposes: that all variables introduced
by $\mu$-types are pairwise distinct, and that types underneath
a~$\mu$ are not terminated. This can be clearly seen by formation rule
for $\mu$-types, where notation $\Delta,X$ requires $X\notin\Delta$.
%
In the sequel we assume that all types are such that $\isType[] T$.

Denote by $\mathcal{T}$ the set of well-formed types.
%
The \emph{labelled transition system} (LTS) for context-free session
types is given by set $\mathcal{T}$ as \emph{states}, the set
generated by the grammar for~$a$ as \emph{actions}, and the
\emph{transition relation} $S\LTSderives T$ defined by the rules below.

\noindent The labelled transition system\hfill\fbox{$S \LTSderives T$}
%
\begin{gather*}
  \sharp B \LTSderives[\sharp B] \skipk
  \qquad
  \star\{l_i\colon S_i\}_{i\in I} \LTSderives[\star l_j] S_j\quad
  (j\in I)
  \\
  \frac{S \LTSderives S'}{S; T \LTSderives S';T}
  \qquad
  \frac{\DONE{S} \quad T \LTSderives T'}{S; T \LTSderives T'}
  \qquad
  \frac{\subs{\mu X.S}{X}S \LTSderives T}{\mu X.S \LTSderives T}
\end{gather*}

\emph{Type bisimulation}, $\TypeEquiv$, is defined in the usual way from the
labelled transition system~\cite{sangiorgi2014introduction}.
%
We say that a type relation $\mathcal R$ is a \emph{bisimulation} if,
whenever $S\mathcal RT$, for all~$a$ we have:
%
\begin{itemize}
\item for all $S'$ with $S \LTSderives S'$, there is $T'$ such that $T
  \LTSderives T'$ and $S'\mathcal RT'$, and
\item for all $T'$ with $T \LTSderives T'$, there is $S'$ such that $S
  \LTSderives S'$ and $S'\mathcal RT'$.
\end{itemize}
%
We say that two types are bisimilar, written $S \bisim T$, if there
is a bisimulation~$\mathcal R$ with $P\mathcal RQ$.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
