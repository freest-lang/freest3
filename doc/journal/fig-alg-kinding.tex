\begin{figure}[h!]
  The \emph{synthesise} relation \hfill\fbox{$\algkindout T \kind$}
  \begin{gather*}
    % Functional types
    \frac{}{\algkindout{\tcBase}{\kindt^\Un}}
    \quad 
    \frac{
      \algkindout{T_1}{\kind_1}
      \quad
      \algkindout{T_2}{\kind_2}
    }{
      \algkindout{\tPair{T_1}{T_2}}{\max(\kind_1, \kind_2)}
    }
    \quad
    \frac{
      \algkindout{T_1}{\kind_1}
      \quad
      \algkindout{T_2}{\kind_2}
    }{
      \algkindout{(\tFun{T_1}{T_2})}{\kindt^m}
    }
    % \quad
    % \frac{ % subsumed by the previous rule
    %   \algkindout{T_1}{\kind_1}
    %   \quad
    %   \algkindout{T_2}{\kind_2}
    % }{
    %   \algkindout{(\tLinFun{T_1}{T_2})}{\kindt^\Lin}
    % }
    % \qquad % Wrong, this is  treated separately as a datatype
    % \frac{
    %   \algkindout{T_i}{\kind_i}
    % }{
    %   \algkindout{\tDatatype{l_i\colon T_i}_{i\in I}}{\max{\kind_i}}
    % }
    \\
    % This is both functional and session
    \frac{x : \kind \in \kindEnv}{\algkindout x \kind}
   \quad
    %
    % Session types
    %
  \frac{
    \isContractive T
    \qquad
    \algkindout[\kindEnv, x\colon \kinds^\Un] T \kind
  }{
    \algkindout{\tRec xT}{\kind}
  }
  \quad
  \frac{}{\kindEnv \Alg \tskip \rightarrow \kinds^\Un}
  \quad 
  \frac{}{\algkindout{\tMsg T}{\kinds^\Lin}}
  \\
  \frac{
    \algkindout{T_1}{\kinds^m}
    \quad
    \algkindout{T_2}{\kinds^n}
  }{
    \algkindout{\tSemi{T_1}{T_2}}{\kinds^{\max(m,n)}}
  }
  \quad
  \frac{
    \algkindin{T_i}{\kinds^\Lin}
  }{
    \algkindout{\tChoice{\{l_i\colon T_i\}}_{i\in I}}{\kinds^\Lin}
  }
  \quad
  \frac{
    \algkindout{T_i}{v^{m_i}}
  }{
    \algkindout{\tData{l_i\colon T_i}_{i\in I}}{\kindt^{\max(m_i)}}
  }
  \end{gather*}
  % 
  The \emph{check against} relation\hfill\fbox{$\algkindin T \kind$}
  %
  \begin{equation*}
    \frac{
      \isContractive T
      \qquad
      \algkindin[\kindEnv, x\colon \kinds^\Un] T \kind
    }{
      \algkindin{\tRec xT}{\kind}
    }
    \quad
    \frac{
      \algkindout{T}{\kind_1}
      \quad
      \isSubkind{\kind_1}{\kind_2}
    }{
      \algkindin T {\kind_2}
    }
  \end{equation*}
  % 
  The multiplicity predicates \hfill\fbox{$\isLin T$}\quad\fbox{$\isUn T$}
  %
  \begin{equation*}
    \frac{
      \algkindout T {v^\Lin}
    }{
      \isLin T
    }
    \qquad
    \frac{
      \algkindout T {v^\Un}
    }{
      \isUn T
    }
  \end{equation*}
  % 
  The is-contractive predicate \hfill\fbox{$\isContractive T$}
  %
  \begin{equation*}
    \isContractive[\kindEnv,x\colon\kind]{x}
    \quad 
    \frac{
      \isContractive{T}
    }{
      \isContractive{T;U}
    }
    \quad
    \frac{
      \isContractive{T}
    }{
      \isContractive{\tRecK xT}
    }
    \quad
    \frac{\text{all other cases}}{\isContractive{T}}
  \end{equation*}
  \caption{Algorithmic kinding system}
  \label{fig:kinding-system}
\end{figure}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
